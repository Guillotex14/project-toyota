<ion-content [fullscreen]="true">
  <ion-grid fixed>
    <ion-row>

      <ion-col size="12" class="header">
          <ion-row>
            <ion-col size="2">
              <ion-icon name="arrow-back-circle-sharp" class="iconBack" (click)="goBack()"></ion-icon>
            </ion-col>
            <ion-col size="8" style="text-align: center;">
              <ion-img src="assets/images/logo/logo_toyota_blanco.png" class="logoRed"></ion-img>
            </ion-col>
            <ion-col size="2">
              <ion-icon name="menu-outline" class="iconMenu" (click)="openMenu()"></ion-icon>
            </ion-col>
          </ion-row>
      </ion-col>

      <app-skeleton *ngIf="loading"></app-skeleton>

      <ion-col size="12" *ngIf="!loading && carDetail">
        <ion-grid fixed>
          <ion-row>
            <ion-col size="12">
              <p class="titlePage">Detalles del vehículo</p>
            </ion-col>

            <ion-col size="12" style="text-align: center !important">
              
              <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" *ngIf="carDetail.images.length === 0">
                <ion-icon name="information-circle" class="iconSwipper"></ion-icon>
                <br>
                <span class="titleSwiper">
                  El vehículo no posee imá cargadas
                </span>
              </ion-col>

              <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" *ngIf="carDetail.images.length > 0">
                <swiper-container [loop]="true" [pagination]="true">
                  <swiper-slide *ngFor="let image of carDetail.images; let i = index">
                    <ion-row>
                      <ion-col size="12">
                        <ion-img [src]="image.img" style="width: 100%;height: 200px;"></ion-img>
                      </ion-col>
                    </ion-row>
                  </swiper-slide>
                  <div class="swiper-pagination"></div>
                </swiper-container>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" >
              <ion-col size="12">
                <span class="spanLabel" style="margin-left: 25px !important;">Modelo</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText" style="margin-left: 30px !important;">{{carDetail.model}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel" class="spanLabel">Marca</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">
                  {{carDetail.brand}}
                </p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;" *ngIf="carDetail.engine_model">
              <ion-col size="12">
                <span class="spanLabel" class="spanLabel">Motor</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.engine_model}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel" class="spanLabel">Año</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">
                  {{carDetail.year}}
                </p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Km</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{setDot(carDetail.km)}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Cilindrada</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.displacement}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Combustible</span>
              </ion-col>
              <ion-col size="12" >
                <p class="pText" >{{carDetail.fuel}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Títulos</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.titles}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Placa del vehículo</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.plate}}</p>
              </ion-col>
            </ion-col>


            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Transmisión</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.transmission}}</p>
              </ion-col>
            </ion-col>

            <ion-col sizeXl="4" sizeLg="14" sizeMd="6" sizeSm="6" sizeXs="6" style="text-align: center !important;">
              <ion-col size="12">
                <span class="spanLabel">Tracción</span>
              </ion-col>
              <ion-col size="12">
                <p class="pText">{{carDetail.traction}}</p>
              </ion-col>
            </ion-col>

            <ion-col size="12" *ngIf="carDetail.id_seller_buyer!==null" style="text-align: center;">
              <ion-button expand="block" shape="round" class="btnYell">
                En negociación
              </ion-button>
            </ion-col>

            <ion-col size="12">
              <ion-card>
                <ion-card-content style="text-align: center !important;">
                  <ion-row>

                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="12" sizeXs="12">
                      <ion-row>
                        
                        <ion-col size="12" >
                          <span class="spanLabel" style="font-size: 15px !important;">Estado</span>
                        </ion-col>
                        <ion-col size="12" style="text-align: center !important;">
                          <ion-row>
                            <!-- <ion-col size="4" style="text-align: center !important;" style="text-align: right !important;">
                              <ion-icon name="navigate-sharp" style="color: #787878; font-size: 25px;"></ion-icon>
                            </ion-col> -->
                            <ion-col size="12" style="text-align: center !important;">
                              <span class="spanLabel2">{{carDetail.city}}</span>
                            </ion-col>
                          </ion-row>
                        </ion-col>
                      </ion-row>
                    </ion-col>
                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="12" sizeXs="12">
                      <ion-row>
                        
                        <ion-col size="12">
                          <span class="spanLabel" style="font-size: 15px !important;">Concesionario</span>
                        </ion-col>
                        <ion-col size="12">
                          <span class="spanLabel2">{{carDetail.concesionary}}</span>
                        </ion-col>
                      </ion-row>
                    </ion-col>
                  </ion-row>
                </ion-card-content>
              </ion-card>
            </ion-col>  

            <ion-col size="12">
              <ion-accordion-group expand="inset" style="width: 100%; margin: 10px auto;">
                
                <ion-accordion value="year">
                  <ion-item slot="header">
                    <ion-label>Documentos del vehículo</ion-label>
                  </ion-item>
  
                  <ion-grid fixed class="ion-padding" slot="content">
                    <ion-row>
                      <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" style="text-align: center;">
                        <ion-row>
                          <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" *ngIf="carDetail.imgs_documentation.length === 0" >
                            <ion-icon name="image" class="noPhotoIcon" ></ion-icon>
                            <br>
                            <span class="noPhotoTitle" >Sin documentos cargados</span>
                          </ion-col>
            
                          <ion-col sizeXl="12" sizeLg="12" sizeMd="12" sizeSm="12" sizeXs="12" *ngIf="carDetail.imgs_documentation.length > 0">
                            <swiper-container [loop]="true" [pagination]="true">
                              <swiper-slide *ngFor="let image of carDetail.imgs_documentation; let i = index">
                                <ion-row>
                                  <ion-col size="12">
                                    <ion-img [src]="image.img" style="width: 100%;height: 200px;"></ion-img>
                                  </ion-col>
                                </ion-row>
                              </swiper-slide>
                              <div class="swiper-pagination"></div>
                            </swiper-container>
                          </ion-col>
                        </ion-row>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-accordion>
              </ion-accordion-group>
            </ion-col>

            <ion-col size="12" *ngIf="carDetail.traction_control === 'true' || carDetail.technology === 'true' || carDetail.performance === 'true' || carDetail.comfort === 'true'">
              <ion-card class="cardDataPlus">
                <ion-card-content>
                  <ion-row>
                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="6" sizeXs="6" *ngIf="carDetail.traction_control === 'true'">
                      <ion-img src="assets/images/logo/traccion.png" style="width: 25% !important;margin: 5px 0px !important"></ion-img>
                      <p style="font-size: 15px; font-weight: bold;">Control de tracción</p>
                      <span style="font-size: 10px; color: #898989">Estable y seguro</span>
                    </ion-col>

                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="6" sizeXs="6" *ngIf="carDetail.technology === 'true'">
                      <ion-img src="assets/images/logo/tecnologia.png" style="width: 29% !important;margin: 5px 0px !important"></ion-img>
                      <p style="font-size: 15px; font-weight: bold;">Tecnología</p>
                      <span style="font-size: 10px; color: #898989">Control de estabilidad(VSC)</span>
                    </ion-col>

                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="6" sizeXs="6" *ngIf="carDetail.performance === 'true'">
                      <ion-img src="assets/images/logo/performance.png" style="width: 25% !important;margin: 5px 0px !important"></ion-img>
                      <p style="font-size: 15px; font-weight: bold;">Performance</p>
                      <span style="font-size: 10px; color: #898989">V6 Twin Turbo (V35A-FTS)</span>
                    </ion-col>

                    <ion-col sizeXl="6" sizeLg="6" sizeMd="6" sizeSm="6" sizeXs="6" *ngIf="carDetail.comfort === 'true'">
                      <ion-img src="assets/images/logo/confort.png" style="width: 20% !important;margin: 5px 0px !important"></ion-img>
                      <p style="font-size: 15px; font-weight: bold;">Confort</p>
                      <span style="font-size: 10px; color: #898989">Asientos tapizados en cuero natural y  ecológico</span>
                    </ion-col>
                  </ion-row>
                </ion-card-content>
              </ion-card>
            </ion-col>
            
            <ion-col size="12" *ngIf="carDetail.concesionary_maintenance">
              <ion-item-divider style="text-align: center;">
                <ion-label style="margin: 10px auto;color: #000;">¿SE REALIZARON LOS MANTENIMIENTOS <br> REGULARES EN EL CONCESIONARIO?</ion-label>
              </ion-item-divider>
  
              <ion-item class="itemSegment">
                <ion-segment  disabled="true" [(ngModel)]="carDetail.concesionary_maintenance">
                  <ion-segment-button [value]="false" class="segment-red">
                    <ion-label>No</ion-label>
                  </ion-segment-button>
                  <ion-segment-button [value]="true" class="segment-green">
                    <ion-label>Sí</ion-label>
                  </ion-segment-button>
                </ion-segment>
              </ion-item>
            </ion-col>

            <ion-col size="12" style="text-align: center; color: red;font-size: 15px; font-weight: 900;" *ngIf="!carDetail.mechanicalFile">
              <p>Pendiente por ficha mecánica</p>
            </ion-col>

            <ion-col size="12">
              <ion-grid fixed>
                <ion-row>
                  <ion-col size="12" style="text-align: center;"  *ngIf="carDetail.mechanicalFile">
                    <p>Ficha Mecánica</p>
                  </ion-col>
                  <ion-col sizeXl="6" sizeLg="6" sizeMd="12" sizeSm="12" sizeXs="12"  *ngIf="carDetail.mechanicalFile" class="colGenCon">
                    <ion-row>
                      <ion-col size="12">
                        
                        <ion-row *ngIf="carDetail.general_condition ==='excelente' || carDetail.general_condition >= 96">
                          <ion-col size="12">
                            <span style="font-size: 22px !important;font-weight: bold;">Condición del vehículo:</span>
                          </ion-col>
                          <ion-col size="5" style="text-align: right !important;">
                            <ion-icon name="shield-checkmark-outline" style="font-size: 45px !important; color: #11D800 !important"></ion-icon>
                          </ion-col>
                          <ion-col size="7"style="text-align: left !important;">
                            <p style="font-size: 25px !important; color: #11D800 !important;font-weight: bold;margin: 10px auto !important;">Excelente</p>
                          </ion-col>
                        </ion-row>
                
                        <ion-row *ngIf="carDetail.general_condition ==='bueno' || carDetail.general_condition >= 86 && carDetail.general_condition < 96">
                          <ion-col size="12">
                            <span style="font-size: 22px !important;font-weight: bold;">Condición del vehículo:</span>
                          </ion-col>
                          <ion-col size="5" style="text-align: right !important;">
                            <ion-icon name="shield-checkmark-outline" style="font-size: 45px !important; color: #F9D616 !important"></ion-icon>
                          </ion-col>
                          <ion-col size="7"style="text-align: left !important;">
                            <p style="font-size: 25px !important; color: #F9D616 !important;font-weight: bold;margin: 10px auto !important;">Bueno</p>
                          </ion-col>
                        </ion-row>
                        <ion-row *ngIf="carDetail.general_condition ==='regular' || carDetail.general_condition >= 76 && carDetail.general_condition < 86 ">
                          <ion-col size="12">
                            <span style="font-size: 22px !important;font-weight: bold;">Condición del vehículo:</span>
                          </ion-col>
                          <ion-col size="5" style="text-align: right !important;">
                            <ion-icon name="alert-circle-outline" style="font-size: 45px !important; color: #F7941D !important"></ion-icon>
                          </ion-col>
                          <ion-col size="7"style="text-align: left !important;">
                            <p style="font-size: 25px !important; color: #F7941D !important;font-weight: bold;margin: 10px auto !important;">Regular</p>
                          </ion-col>
                        </ion-row>
                
                        <ion-row *ngIf="carDetail.general_condition ==='malo' || carDetail.general_condition < 76">
                          <ion-col size="12">
                            <span style="font-size: 22px !important;font-weight: bold;">Condición del vehículo:</span>
                          </ion-col>
                          <ion-col size="5" style="text-align: right !important;">
                            <ion-icon name="close-circle-outline" style="font-size: 45px !important; color: #EB0A1E !important"></ion-icon>
                          </ion-col>
                          <ion-col size="7"style="text-align: left !important;">
                            <p style="font-size: 25px !important; color: #EB0A1E !important;font-weight: bold;margin: 10px auto !important;">Malo</p>
                          </ion-col>
                        </ion-row>

                      </ion-col>
                    </ion-row>
                  </ion-col>

                  <ion-col sizeXl="6" sizeLg="6" sizeMd="12" sizeSm="12" sizeXs="12" style="text-align: center; margin: auto;">

                    <ion-button (click)="openFile()" expand="block" shape="round" color="success" *ngIf="!carDetail.mechanicalFile">
                      Crear Ficha
                    </ion-button>
                    <ion-button (click)="mechanicalFileDetail()" expand="block" shape="round" color="success" *ngIf="carDetail.mechanicalFile">
                      Ver ficha técnica
                    </ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-col>

          </ion-row>
        </ion-grid>
      </ion-col>

      <ion-col size="12" *ngIf="!carDetail && !loading" style="text-align: center;">
        <ion-icon name="help-circle" class="iconNoInfo"></ion-icon>
        <p class="titleNoInfo">No se encontraron vehículos</p>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>


